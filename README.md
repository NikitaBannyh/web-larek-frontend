# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Архитектура приложения
![web-larek-uml](https://github.com/user-attachments/assets/70f00704-28be-4186-8624-03050432b2a8)  

В приложении взаимодействие осуществляется посредством событий. Модели инициируют эти события, а обработчики событий в основном коде передают данные компонентам представления, выполняют промежуточные вычисления и обновляют значения в моделях.  



## Базовый код

### Класс EventEmitter
Класс EventEmitter обеспечивает работу событий. Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события.  
constructor()  - создает новый экземпляр класса.

Методы:  

    emit() - инициализирует событие;
    on() - подписка на события;  
    off() - отписка от события. 

### Класс API
Базовая логика отправки запросов на сервер.  
constructor(baseUrl: string, options: RequestInit = {})  - создает новый экземпляр класса, используя базовую ссылку и параметрами запроса.

Методы:  

    get() - выполняет GET запрос;   
    post() - принимает объект с данными, которые будут переданы в JSON в теле запроса, и   отправляет эти данные на ендпоинт переданный как параметр при вызове метода.

### Класс Component
Класс служит в качестве базового компонента для работы с DOM.    
constructor(container: HTMLElement)  - создает новый экземпляр класса, используеет переданный контейнер для работы с ним

Методы:  

    toggleClass() - переключает CSS-класс;
    setText() - установливает текстовое содержимое;
    setDisabled() - изменяет статус блокировки;
    setHidden() - скрывает элемент;
    setVisible() - показывает элемент;
    setImage() - установливает изображение с алтернативным текстом;
    render() - возвращает корневой DOM-элемент.

### Класс Model
Класс предназначенный для создания модельных данных, используемых для управления данными приложения. 
Напрямую "общается" с EventEmitter, принимая в конструктор данные модели и аргумент events.  
constructor(data, events) - создание экзмпляра класса Model, принимает данные и объект событий.

Методы:

    emitChanges() - для сообщения всем подписчикам о том, что модель изменилась.

## Компоненты модели данных

### Класс AppState
Класс является основной моделью данных для приложения, в нем хранится каталог продуктов, данные о заказе и ошибки валидации форм доставки и контакта.
Наследуется от Model

Методы:

    clearBasket() - для очистки данных корзины;
    addToBasket() - для добавления конкретного товара в корзину;
    removeFromBasket() - для удаления конкретного товара из корзины;
    updateBasket() - для обновление состояния корзины;
    setCatalog() - для отрисовки каталога товаров;
    setPreview() - для открытия предпросмотра товара;
    setOrderDelivery() - для установки данных по доставке заказа;
    setOrdersContacts() - для установки данных о контактах;
    checkOrdersValidation() - для валидации формы заказа.

## Компоненты представления
Все классы слоя отображения наследуют базовый класс Component. Конструктор класса принимает html контейнер.

### Класс Basket - корзина (Component<IBasket>);
Класс Basket предназначен для хранения выбранных элементов в корзине. Наследует класс Component и реализует интерфейс IBasket.  

В полях класса хранятся следующие данные:  

    list: HTMLElement; - элемент списка выбранных товаров
    total: HTMLElement - общая стоимость товаров
    
Методы:  

    items (items: HTMLElement[]) - установить список товаров в корзине
    total (total: number) - устанавливает общую стоимость заказа

### Класс Card - карточка товара (Component<ICard>);  
Класс Card предназначен для вывода информации о продукте  

В полях класса хранятся следующие данные:  

    id: string - id продукта
    description: string - описание
    image: string - изображение продукта
    title: string - название продукта
    category: string - категория продукта
    price: number | null - цена продукта
    
Методы:  

    description() - устанавливает описание
    image() - устанавливает изображение продукта
    title() - устанавливает название продукта
    category() - устанавливает категорию продукта
    price(): - устанавливает цену продукта
    
### Класс Modal - универсальное модальное окно (Component<IModal>);  
Класс Modal предназначен для открытия и закрытия модальньного окна. Наследует класс Component и реализует интерфейс IModal.  

В полях класса хранятся следующие данные:  

    closeButton: HTMLButtonElement - кнопка закрытия модального окна
    content: HTMLElement - элемент отображения в модальном окне
    
Методы:  

    content(items: HTMLElement[])  - установить контент в моадльном окне
    open () - открыть модальное окно
    close () - закрыть модальное окно
    render (data) - формирует модальное окно при открытие

### Класс Success - ображает информационное сообщение об успешной покупке (Component<ISuccess>);  
Класс Success используется для отображения формы после успешного выполнения заказа.  

В полях класса хранятся следующие данные:  

    close: HTMLButtonElement - кнопка закрытия окна
    
### Класс Page - собирает на главную страницу корзину со счетчиком и товары (Component<IPage>);  
Класс Page предназначен для вывода информации на страницe.  

В полях класса хранятся следующие данные:

    counter: HTMLElement; - счетчик товаров в корзине
    catalog: HTMLElement; - каталог товаров
    wrapper: HTMLElement; - обертка страницы
    basket: HTMLElement; - корзина с товарами
Методы:

    counter (value: number)  - считает количество элементов в корзине
    catalog (items: HTMLElement[])  - устанавливает список элементов на странице
    locked (value: boolean) - блокирует прокрутку

### Класс Form - предназначен отображения формы;  
В полях класса хранятся следующие данные:  

    submit: HTMLButtonElement - кнопка отправки формы
    errors: HTMLElement; - элементы ошибки валидации
Методы:  

    onInputChange(field, value: string) - отпрвка изменений данных в форме
    valid (value: boolean) - установка доступа к кнопке
    errors (value: string) - установка текста ошибки валидации
    render (state: IFormState) - рендер формы с переданными значениями
    
### Класс OrderDelivery - отображает и управляет формой ввода данных о доставке (Component<IOrderDelivery>);  
Методы:

    adress (value: string) - установка адреса
    payment(value: string) - установка способа оплаты
    
### Класс OrdersContacts - отображает и управляет формой ввода контактных данных (Component<IOrdersContacts>);
Методы:  

    phone (value: string) - установка телефона
    email (value: string) - установка емаила

## Слой коммуникации
### Класс LarekApi
Конструктор принимает экземпляр класса Api и предлагает методы для взаимодействия с бэкендом сервиса.
